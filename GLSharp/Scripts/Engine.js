// Engine.js
(function(){
Type.registerNamespace('GLSharp.Content');GLSharp.Content.IResourceConverter=function(){};GLSharp.Content.IResourceConverter.registerInterface('GLSharp.Content.IResourceConverter');GLSharp.Content.LightItem=function(){}
GLSharp.Content.LightItem.prototype={$0:null,get_id:function(){return this.$0;},set_id:function(value){this.$0=value;return value;},$1:0,get_type:function(){return this.$1;},set_type:function(value){this.$1=value;return value;},$2:null,get_properties:function(){return this.$2;},set_properties:function(value){this.$2=value;return value;}}
GLSharp.Content.LightConverter=function(){}
GLSharp.Content.LightConverter.prototype={get_typeHandled:function(){return 'light';},convert:function(input){var $0=input;var $1=new GLSharp.Content.LightItem();$1.set_id($0.Id);$1.set_type($0.Type);$1.set_properties({});var $dict1=$0.Properties;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};if($2.key==='color'){var $3=$2.value.split(' ');var $4=GLSharp.Core.SystemCore.get_environment().createFloat32Array($3.length);for(var $5=0;$5<$3.length;$5++){$4[$5]=parseFloat($3[$5]);}$1.get_properties()['color']=$4;}else if($2.key==='intensity'){$1.get_properties()['intensity']=parseFloat($2.value);}else if($2.key==='falloff_angle'){$1.get_properties()['falloff_angle']=parseFloat($2.value);}}return $1;}}
GLSharp.Content.MeshItem=function(){}
GLSharp.Content.MeshItem.prototype={$0:null,get_id:function(){return this.$0;},set_id:function(value){this.$0=value;return value;},$1:null,get_indexes:function(){return this.$1;},set_indexes:function(value){this.$1=value;return value;},$2:null,get_normals:function(){return this.$2;},set_normals:function(value){this.$2=value;return value;},$3:null,get_uVs:function(){return this.$3;},set_uVs:function(value){this.$3=value;return value;},$4:null,get_vertices:function(){return this.$4;},set_vertices:function(value){this.$4=value;return value;}}
GLSharp.Content.MeshConverter=function(){}
GLSharp.Content.MeshConverter.prototype={get_typeHandled:function(){return 'mesh';},convert:function(input){if(input==null){return null;}var $0=input;var $1=new GLSharp.Content.MeshItem();$1.set_id($0.Id);$1.set_indexes(GLSharp.Core.SystemCore.get_environment().createInt32ArrayFromArray($0.Indexes));$1.set_normals(GLSharp.Core.SystemCore.get_environment().createFloat32ArrayFromArray($0.Normals));$1.set_uVs(GLSharp.Core.SystemCore.get_environment().createFloat32ArrayFromArray($0.UVs));$1.set_vertices(GLSharp.Core.SystemCore.get_environment().createFloat32ArrayFromArray($0.Vertices));return $1;}}
GLSharp.Content.NodeConverter=function(){}
GLSharp.Content.NodeConverter.prototype={get_typeHandled:function(){return 'node';},convert:function(input){var $0=input;return this.$0($0);},$0:function($p0){var $0=new GLSharp.Universe.Node();$0.set_id($p0.Id);$0.set_local(new GLSharp.Util.Matrix4X4($p0.Matrix));if($p0.Children!=null){var $enum1=ss.IEnumerator.getEnumerator($p0.Children);while($enum1.moveNext()){var $2=$enum1.current;$0.addChild(this.$0($2));}}var $1=[];if($p0.References!=null){var $enum2=ss.IEnumerator.getEnumerator($p0.References);while($enum2.moveNext()){var $3=$enum2.current;this.$1($3,$1);}}var $enum3=ss.IEnumerator.getEnumerator($1);while($enum3.moveNext()){var $4=$enum3.current;$0.addComponent($4);}return $0;},$1:function($p0,$p1){if($p0.Type==='mesh'){var $0=new GLSharp.Universe.MeshComponent();var $1=new GLSharp.Content.Handle();$1.set_library($p0.Library);$1.set_id($p0.Resource);$0.set_meshHandle($1);$p1.add($0);}else if($p0.Type==='material'){var $2=new GLSharp.Universe.MaterialComponent();var $3=new GLSharp.Content.Handle();$3.set_library($p0.Library);$3.set_id($p0.Resource);$2.set_materialHandle($3);$p1.add($2);}if($p0.Children!=null){var $enum1=ss.IEnumerator.getEnumerator($p0.Children);while($enum1.moveNext()){var $4=$enum1.current;this.$1($4,$p1);}}}}
GLSharp.Content.Handle=function(){}
GLSharp.Content.Handle.prototype={$0:null,get_library:function(){return this.$0;},set_library:function(value){this.$0=value;return value;},$1:null,get_id:function(){return this.$1;},set_id:function(value){this.$1=value;return value;}}
GLSharp.Content.Collection=function(){}
GLSharp.Content.Collection.prototype={$0:null,get_name:function(){return this.$0;},set_name:function(value){this.$0=value;return value;},$1:null,get_resources:function(){return this.$1;},set_resources:function(value){this.$1=value;return value;}}
GLSharp.Content.ResourceItem=function(){}
GLSharp.Content.ResourceItem.prototype={$0:null,get_id:function(){return this.$0;},set_id:function(value){this.$0=value;return value;},$1:null,get_type:function(){return this.$1;},set_type:function(value){this.$1=value;return value;},$2:null,get_item:function(){return this.$2;},set_item:function(value){this.$2=value;return value;}}
GLSharp.Content.Library=function(){this.$0={};this.$1={};}
GLSharp.Content.Library.prototype={$0:null,$1:null,add_collectionLoaded:function(value){this.$2=ss.Delegate.combine(this.$2,value);},remove_collectionLoaded:function(value){this.$2=ss.Delegate.remove(this.$2,value);},$2:null,loadLibrary:function(url){var $0=new GLSharp.Data.ResourceManagerParams();$0.set_type('json');GLSharp.Core.SystemCore.get_resourceManager().getResource(url,$0).add_resourceChanged(ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_0.get_finished()){this.$3($p1_0.get_data());}}));},$3:function($p0){var $0=$p0;GLSharp.Core.SystemCore.get_logger().log('Loading library : '+$0.Name);var $1=null;if(($1=this.$0[$0.Name])==null){$1=new GLSharp.Content.Collection();$1.set_name($0.Name);$1.set_resources({});this.$0[$1.get_name()]=$1;}this.$4($1,$0.ContentObjects);if(this.$2!=null){this.$2(this,$1);}},$4:function($p0,$p1){var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $0=$enum1.current;var $1=this.$1[$0.Type];if($1==null){GLSharp.Core.SystemCore.get_logger().log('No resource converter found for resource + '+$0.Resource);continue;}var $2=$1.convert($0.Resource);var $3=new GLSharp.Content.ResourceItem();$3.set_id($0.Id);$3.set_type($0.Type);$3.set_item($2);$p0.get_resources()[$3.get_id()]=$3;}},unloadLibrary:function(name){},findResource:function(library,resourceName){var $0=null;if(($0=this.$0[library])==null){return null;}var $1=null;if(($1=$0.get_resources()[resourceName])==null){return null;}var $2=new GLSharp.Content.Handle();$2.set_library(library);$2.set_id(resourceName);return $2;},getResource:function(handle){return this.$0[handle.get_library()].get_resources()[handle.get_id()];},addConverter:function(converter){this.$1[converter.get_typeHandled()]=converter;},removeConverter:function(converter){delete this.$1[converter.get_typeHandled()];}}
Type.registerNamespace('GLSharp.Universe');GLSharp.Universe.MaterialComponent=function(){GLSharp.Universe.MaterialComponent.initializeBase(this);this._type='material';}
GLSharp.Universe.MaterialComponent.prototype={$1:null,get_materialHandle:function(){return this.$1;},set_materialHandle:function(value){this.$1=value;return value;}}
GLSharp.Universe.ComponentCollection=function(){this.$0={};this.$1=[];}
GLSharp.Universe.ComponentCollection.prototype={addKnownType:function(type){this.$1.add(type);},removeKnowType:function(type){this.$1.remove(type);delete this.$0[type];},addComponent:function(component){if(!this.$1.contains(component.get_type())){return false;}this.$0[component.get_type()].add(component);return true;},removeComponent:function(component){if(!this.$1.contains(component.get_type())){return false;}return this.$0[component.get_type()].remove(component);},getCollection:function(type){if(!this.$1.contains(type)){return null;}return this.$0[type];}}
GLSharp.Universe.Component=function(){}
GLSharp.Universe.Component.prototype={_type:null,get_type:function(){return this._type;},set_type:function(value){this._type=value;return value;},$0:null,get_parent:function(){return this.$0;},set_parent:function(value){this.$0=value;return value;}}
GLSharp.Universe.MeshComponent=function(){GLSharp.Universe.MeshComponent.initializeBase(this);this._type='mesh';}
GLSharp.Universe.MeshComponent.prototype={$1:null,get_meshHandle:function(){return this.$1;},set_meshHandle:function(value){this.$1=value;return value;}}
GLSharp.Universe.Node=function(){this.$5={};this.$8=true;this.$9=GLSharp.Util.Matrix4X4.get_identity().clone();}
GLSharp.Universe.Node.prototype={add_componentAdded:function(value){this.$0=ss.Delegate.combine(this.$0,value);},remove_componentAdded:function(value){this.$0=ss.Delegate.remove(this.$0,value);},$0:null,add_componentRemoved:function(value){this.$1=ss.Delegate.combine(this.$1,value);},remove_componentRemoved:function(value){this.$1=ss.Delegate.remove(this.$1,value);},$1:null,add_childAdded:function(value){this.$2=ss.Delegate.combine(this.$2,value);},remove_childAdded:function(value){this.$2=ss.Delegate.remove(this.$2,value);},$2:null,add_childRemoved:function(value){this.$3=ss.Delegate.combine(this.$3,value);},remove_childRemoved:function(value){this.$3=ss.Delegate.remove(this.$3,value);},$3:null,add_transformChanged:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_transformChanged:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,get_components:function(){return this.$5;},$6:'Undefined',get_id:function(){return this.$6;},set_id:function(value){this.$6=value;return value;},$7:null,$8:false,get_world:function(){if(this.$8){this.$F();}return this.$7;},$9:null,get_local:function(){return this.$9;},set_local:function(value){this.$9=value;return value;},$A:null,get_localTranslation:function(){return this.$A;},$B:null,get_localRotation:function(){return this.$B;},set_localRotation:function(value){this.$B=value;return value;},$C:null,get_localScale:function(){return this.$C;},set_localScale:function(value){this.$C=value;return value;},$D:null,get_children:function(){if(this.$D==null){this.$D={};}return this.$D;},$E:null,get_parent:function(){return this.$E;},set_parent:function(value){this.$E=value;return value;},$F:function(){this.$7=this.get_parent().get_world().clone().multiplyAffineM(this.$7);this.$8=false;},invalidateWorldTransformation:function(){this.$8=true;var $dict1=this.get_children();for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};$0.value.invalidateWorldTransformation();}},addComponent:function(component){component.set_parent(this);this.$5[component.get_type()]=component;if(this.$0!=null){this.$0(this,component);}},removeComponent:function(component){component.set_parent(null);delete this.$5[component.get_type()];if(this.$1!=null){this.$1(this,component);}},getComponent:function(type){return this.$5[type];},addChild:function(child){if(this.$D[child.get_id()]!=null){throw new Error('Child with the same name already exists.');}this.$D[child.get_id()]=child;child.set_parent(this);if(this.$2!=null){this.$2(this,child);}},removeChild:function(child){if(this.$D[child.get_id()]==null){return false;}delete this.$D[child.get_id()];child.set_parent(null);if(this.$3!=null){this.$3(this,child);}return true;},findChild:function(id,deep){return null;},translate:function(distance){this.$A.add(distance);this.$9.translate(distance);this.invalidateWorldTransformation();if(this.$4!=null){this.$4(this,null);}},rotate:function(angle,axis){this.$B.add(axis.clone().scale(angle));this.$9.rotate(angle,axis);this.invalidateWorldTransformation();if(this.$4!=null){this.$4(this,null);}},scale:function(scale){this.$C.add(scale);this.$9.scale(scale);this.invalidateWorldTransformation();if(this.$4!=null){this.$4(this,null);}}}
GLSharp.Universe.World=function(cellsX,cellsY,cellWidth,cellHeight){this.reset();}
GLSharp.Universe.World.prototype={add_nodeAdded:function(value){this.$0=ss.Delegate.combine(this.$0,value);},remove_nodeAdded:function(value){this.$0=ss.Delegate.remove(this.$0,value);},$0:null,add_nodeRemoved:function(value){this.$1=ss.Delegate.combine(this.$1,value);},remove_nodeRemoved:function(value){this.$1=ss.Delegate.remove(this.$1,value);},$1:null,reset:function(){},addNode:function(node){if(this.$0!=null){this.$0(this,node);}},addDynamicNode:function(node){},removeNode:function(node){if(this.$1!=null){this.$1(this,node);}}}
Type.registerNamespace('GLSharp.Util');GLSharp.Util.Matrix4X4=function(elements){this.$1=(elements==null)?GLSharp.Core.SystemCore.get_environment().createFloat32Array(16):GLSharp.Core.SystemCore.get_environment().createFloat32ArrayFromArray(elements);}
GLSharp.Util.Matrix4X4.get_identity=function(){return GLSharp.Util.Matrix4X4.$0||(GLSharp.Util.Matrix4X4.$0=new GLSharp.Util.Matrix4X4([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]));}
GLSharp.Util.Matrix4X4.makeFrustrum=function(left,right,bottom,top,znear,zfar){var $0=new GLSharp.Util.Matrix4X4(null);$0.$1[0]=2*znear/(right-left);$0.$1[1]=0;$0.$1[2]=0;$0.$1[3]=0;$0.$1[4]=0;$0.$1[5]=2*znear/(top-bottom);$0.$1[6]=0;$0.$1[7]=0;$0.$1[8]=(right+left)/(right-left);$0.$1[9]=(top+bottom)/(top-bottom);$0.$1[10]=-(zfar+znear)/(zfar-znear);$0.$1[11]=-1;$0.$1[12]=0;$0.$1[13]=0;$0.$1[14]=-2*zfar*znear/(zfar-znear);$0.$1[15]=0;return $0;}
GLSharp.Util.Matrix4X4.makePerspective=function(fov,aspect,znear,zfar){var $0=znear*Math.tan(fov*Math.PI/360);var $1=-$0;var $2=$1*aspect;var $3=$0*aspect;return GLSharp.Util.Matrix4X4.makeFrustrum($2,$3,$1,$0,znear,zfar);}
GLSharp.Util.Matrix4X4.makeOrtho=function(left,right,bottom,top,znear,zfar){var $0=new GLSharp.Util.Matrix4X4(null);$0.$1[0]=2/(right-left);$0.$1[1]=0;$0.$1[2]=0;$0.$1[3]=0;$0.$1[4]=0;$0.$1[5]=2/(top-bottom);$0.$1[6]=0;$0.$1[7]=0;$0.$1[8]=0;$0.$1[9]=0;$0.$1[10]=-2/(zfar-znear);$0.$1[11]=0;$0.$1[12]=-(right+left)/(right-left);$0.$1[13]=-(top+bottom)/(top-bottom);$0.$1[14]=-(zfar+znear)/(zfar-znear);$0.$1[15]=1;return $0;}
GLSharp.Util.Matrix4X4.makeLookAt=function(eye,center,up){var $0=new GLSharp.Util.Matrix4X4(null);var $1=eye.direction(center);var $2=up.clone().cross($1).normalize();var $3=$1.clone().cross($2).normalize();$0.$1[0]=$2._elements[0];$0.$1[1]=$3._elements[0];$0.$1[2]=$1._elements[0];$0.$1[3]=0;$0.$1[4]=$2._elements[1];$0.$1[5]=$3._elements[1];$0.$1[6]=$1._elements[1];$0.$1[7]=0;$0.$1[8]=$2._elements[2];$0.$1[9]=$3._elements[2];$0.$1[10]=$1._elements[2];$0.$1[11]=0;$0.$1[12]=0;$0.$1[13]=0;$0.$1[14]=0;$0.$1[15]=1;var $4=new GLSharp.Util.Matrix4X4(null);$4.$1[0]=1;$4.$1[1]=0;$4.$1[2]=0;$4.$1[3]=0;$4.$1[4]=0;$4.$1[5]=1;$4.$1[6]=0;$4.$1[7]=0;$4.$1[8]=0;$4.$1[9]=0;$4.$1[10]=1;$4.$1[11]=0;$4.$1[12]=-eye._elements[0];$4.$1[13]=-eye._elements[1];$4.$1[14]=-eye._elements[2];$4.$1[15]=1;return $0.multiplyAffineM($4);}
GLSharp.Util.Matrix4X4.prototype={$1:null,get_elements:function(){return this.$1;},set_elements:function(value){this.$1=value;return value;},multiplyM:function(other){var $0=GLSharp.Core.SystemCore.get_environment().createFloat32Array(16);$0[0]=this.$1[0]*other.$1[0]+this.$1[4]*other.$1[1]+this.$1[8]*other.$1[2]+this.$1[12]*other.$1[3];$0[1]=this.$1[1]*other.$1[0]+this.$1[5]*other.$1[1]+this.$1[9]*other.$1[2]+this.$1[13]*other.$1[3];$0[2]=this.$1[2]*other.$1[0]+this.$1[6]*other.$1[1]+this.$1[10]*other.$1[2]+this.$1[14]*other.$1[3];$0[3]=this.$1[3]*other.$1[0]+this.$1[7]*other.$1[1]+this.$1[11]*other.$1[2]+this.$1[15]*other.$1[3];$0[4]=this.$1[0]*other.$1[4]+this.$1[4]*other.$1[5]+this.$1[8]*other.$1[6]+this.$1[12]*other.$1[7];$0[5]=this.$1[1]*other.$1[4]+this.$1[5]*other.$1[5]+this.$1[9]*other.$1[6]+this.$1[13]*other.$1[7];$0[6]=this.$1[2]*other.$1[4]+this.$1[6]*other.$1[5]+this.$1[10]*other.$1[6]+this.$1[14]*other.$1[7];$0[7]=this.$1[3]*other.$1[4]+this.$1[7]*other.$1[5]+this.$1[11]*other.$1[6]+this.$1[15]*other.$1[7];$0[8]=this.$1[0]*other.$1[8]+this.$1[4]*other.$1[9]+this.$1[8]*other.$1[10]+this.$1[12]*other.$1[11];$0[9]=this.$1[1]*other.$1[8]+this.$1[5]*other.$1[9]+this.$1[9]*other.$1[10]+this.$1[13]*other.$1[11];$0[10]=this.$1[2]*other.$1[8]+this.$1[6]*other.$1[9]+this.$1[10]*other.$1[10]+this.$1[14]*other.$1[11];$0[11]=this.$1[3]*other.$1[8]+this.$1[7]*other.$1[9]+this.$1[11]*other.$1[10]+this.$1[15]*other.$1[11];$0[12]=this.$1[0]*other.$1[12]+this.$1[4]*other.$1[13]+this.$1[8]*other.$1[14]+this.$1[12]*other.$1[15];$0[13]=this.$1[1]*other.$1[12]+this.$1[5]*other.$1[13]+this.$1[9]*other.$1[14]+this.$1[13]*other.$1[15];$0[14]=this.$1[2]*other.$1[12]+this.$1[6]*other.$1[13]+this.$1[10]*other.$1[14]+this.$1[14]*other.$1[15];$0[15]=this.$1[3]*other.$1[12]+this.$1[7]*other.$1[13]+this.$1[11]*other.$1[14]+this.$1[15]*other.$1[15];this.$1=$0;return this;},multiplyAffineM:function(other){var $0=GLSharp.Core.SystemCore.get_environment().createFloat32Array(16);$0[0]=this.$1[0]*other.$1[0]+this.$1[4]*other.$1[1]+this.$1[8]*other.$1[2];$0[1]=this.$1[1]*other.$1[0]+this.$1[5]*other.$1[1]+this.$1[9]*other.$1[2];$0[2]=this.$1[2]*other.$1[0]+this.$1[6]*other.$1[1]+this.$1[10]*other.$1[2];$0[3]=0;$0[4]=this.$1[0]*other.$1[4]+this.$1[4]*other.$1[5]+this.$1[8]*other.$1[6];$0[5]=this.$1[1]*other.$1[4]+this.$1[5]*other.$1[5]+this.$1[9]*other.$1[6];$0[6]=this.$1[2]*other.$1[4]+this.$1[6]*other.$1[5]+this.$1[10]*other.$1[6];$0[7]=0;$0[8]=this.$1[0]*other.$1[8]+this.$1[4]*other.$1[9]+this.$1[8]*other.$1[10];$0[9]=this.$1[1]*other.$1[8]+this.$1[5]*other.$1[9]+this.$1[9]*other.$1[10];$0[10]=this.$1[2]*other.$1[8]+this.$1[6]*other.$1[9]+this.$1[10]*other.$1[10];$0[11]=0;$0[12]=this.$1[0]*other.$1[12]+this.$1[4]*other.$1[13]+this.$1[8]*other.$1[14]+this.$1[12];$0[13]=this.$1[1]*other.$1[12]+this.$1[5]*other.$1[13]+this.$1[9]*other.$1[14]+this.$1[13];$0[14]=this.$1[2]*other.$1[12]+this.$1[6]*other.$1[13]+this.$1[10]*other.$1[14]+this.$1[14];$0[15]=1;this.$1=$0;return this;},rotate:function(angle,axis){var $0=Math.cos(angle);var $1=1-$0;var $2=Math.cos(angle);var $3=axis._elements[0]*$2;var $4=axis._elements[1]*$2;var $5=axis._elements[2]*$2;var $6=axis._elements[0]*axis._elements[1]*$1;var $7=axis._elements[0]*axis._elements[2]*$1;var $8=axis._elements[1]*axis._elements[2]*$1;var $9=axis._elements[0]*axis._elements[0]*$1+$0;var $A=$6+$5;var $B=$7-$4;var $C=$6-$5;var $D=axis._elements[1]*axis._elements[1]*$1+$0;var $E=$8+$3;var $F=$7+$4;var $10=$8-$3;var $11=axis._elements[2]*axis._elements[2]*$1+$0;var $12=new GLSharp.Util.Matrix4X4(null);$12.$1[0]=this.$1[0]*$9+this.$1[4]*$A+this.$1[8]*$B;$12.$1[1]=this.$1[1]*$9+this.$1[5]*$A+this.$1[9]*$B;$12.$1[2]=this.$1[2]*$9+this.$1[6]*$A+this.$1[10]*$B;$12.$1[3]=this.$1[3]*$9+this.$1[7]*$A+this.$1[11]*$B;$12.$1[4]=this.$1[0]*$C+this.$1[4]*$D+this.$1[8]*$E;$12.$1[5]=this.$1[1]*$C+this.$1[5]*$D+this.$1[9]*$E;$12.$1[6]=this.$1[2]*$C+this.$1[6]*$D+this.$1[10]*$E;$12.$1[7]=this.$1[3]*$C+this.$1[7]*$D+this.$1[11]*$E;$12.$1[8]=this.$1[0]*$F+this.$1[4]*$10+this.$1[8]*$11;$12.$1[9]=this.$1[1]*$F+this.$1[5]*$10+this.$1[9]*$11;$12.$1[10]=this.$1[2]*$F+this.$1[6]*$10+this.$1[10]*$11;$12.$1[11]=this.$1[3]*$F+this.$1[7]*$10+this.$1[11]*$11;this.$1=$12.$1;return this;},scale:function(scale){this.$1[0]=this.$1[0]*scale._elements[0];this.$1[1]=this.$1[1]*scale._elements[0];this.$1[2]=this.$1[2]*scale._elements[0];this.$1[3]=this.$1[3]*scale._elements[0];this.$1[4]=this.$1[4]*scale._elements[1];this.$1[5]=this.$1[5]*scale._elements[1];this.$1[6]=this.$1[6]*scale._elements[1];this.$1[7]=this.$1[7]*scale._elements[1];this.$1[8]=this.$1[8]*scale._elements[2];this.$1[9]=this.$1[9]*scale._elements[2];this.$1[10]=this.$1[10]*scale._elements[2];this.$1[11]=this.$1[11]*scale._elements[2];this.$1[12]=this.$1[12];this.$1[13]=this.$1[13];this.$1[14]=this.$1[14];this.$1[15]=this.$1[15];return this;},translate:function(distance){this.$1[12]+=this.$1[0]*distance._elements[0]+this.$1[4]*distance._elements[1]+this.$1[8]*distance._elements[2];this.$1[13]+=this.$1[1]*distance._elements[0]+this.$1[5]*distance._elements[1]+this.$1[9]*distance._elements[2];this.$1[14]+=this.$1[2]*distance._elements[0]+this.$1[6]*distance._elements[1]+this.$1[10]*distance._elements[2];this.$1[15]+=this.$1[3]*distance._elements[0]+this.$1[7]*distance._elements[1]+this.$1[11]*distance._elements[2];return this;},transpose:function(){var $0=this.$1[1];this.$1[1]=this.$1[4];this.$1[4]=$0;$0=this.$1[2];this.$1[2]=this.$1[8];this.$1[8]=$0;$0=this.$1[3];this.$1[3]=this.$1[12];this.$1[12]=$0;$0=this.$1[6];this.$1[6]=this.$1[9];this.$1[9]=$0;$0=this.$1[7];this.$1[7]=this.$1[13];this.$1[13]=$0;$0=this.$1[11];this.$1[11]=this.$1[14];this.$1[14]=$0;return this;},clone:function(){return new GLSharp.Util.Matrix4X4(this.$1);}}
GLSharp.Util.Vector3=function(elements){this._elements=(elements==null)?GLSharp.Core.SystemCore.get_environment().createFloat32Array(3):GLSharp.Core.SystemCore.get_environment().createFloat32ArrayFromArray(elements);}
GLSharp.Util.Vector3.prototype={_elements:null,get_elements:function(){return this._elements;},set_elements:function(value){this._elements=value;return value;},add:function(other){this._elements[0]+=other._elements[0];this._elements[1]+=other._elements[1];this._elements[2]+=other._elements[2];return this;},subtract:function(other){this._elements[0]-=other._elements[0];this._elements[1]-=other._elements[1];this._elements[2]-=other._elements[2];return this;},direction:function(to){return this.clone().subtract(to).normalize();},length:function(){return Math.sqrt(this._elements[0]*this._elements[0]+this._elements[1]*this._elements[1]+this._elements[2]*this._elements[2]);},normalize:function(){var $0=1/this.length();this._elements[0]*=$0;this._elements[1]*=$0;this._elements[2]*=$0;return this;},scale:function(val){this._elements[0]*=val;this._elements[1]*=val;this._elements[2]*=val;return this;},dot:function(other){return this._elements[0]*other._elements[0]+this._elements[1]*other._elements[1]+this._elements[2]*other._elements[2];},cross:function(other){var $0=new GLSharp.Util.Vector3(null);$0._elements[0]=this._elements[1]*other._elements[2]-this._elements[2]*other._elements[1];$0._elements[1]=this._elements[2]*other._elements[0]-this._elements[0]*other._elements[2];$0._elements[2]=this._elements[0]*other._elements[1]-this._elements[1]*other._elements[0];this._elements=$0._elements;return this;},clone:function(){return new GLSharp.Util.Vector3(this._elements);}}
Type.registerNamespace('GLSharp');GLSharp.Engine=function(){}
GLSharp.Engine.prototype={$0:null,$1:null,get_activeGame:function(){return this.$1;},set_activeGame:function(value){this.$1=value;this.$1.set_engine(this);return value;},$2:null,get_world:function(){return this.$2;},set_world:function(value){this.$2=value;return value;},$3:null,get_graphics:function(){return this.$3;},set_graphics:function(value){this.$3=value;return value;},$4:null,get_library:function(){return this.$4;},set_library:function(value){this.$4=value;return value;},run:function(){if(this.get_activeGame()==null){throw new Error('No active game defined.');}this.$0=GLSharp.Core.SystemCore.get_timer().start(ss.Delegate.create(this.get_graphics(),this.get_graphics().render),1000/60,true);this.get_graphics().initialize();this.get_activeGame().initialize();},$5:function(){GLSharp.Core.SystemCore.get_logger().log('warning : debug is enabled.');}}
Type.registerNamespace('GLSharp.Game');GLSharp.Game.GameBase=function(){}
GLSharp.Game.GameBase.prototype={$0:null,get_engine:function(){return this.$0;},set_engine:function(value){this.$0=value;return value;},initialize:function(){this.startup();}}
Type.registerNamespace('GLSharp.Graphics');GLSharp.Graphics.ICompiledShader=function(){};GLSharp.Graphics.ICompiledShader.registerInterface('GLSharp.Graphics.ICompiledShader');GLSharp.Graphics.IUniform=function(){};GLSharp.Graphics.IUniform.registerInterface('GLSharp.Graphics.IUniform');GLSharp.Graphics.ClearMode=function(){};GLSharp.Graphics.ClearMode.prototype = {depth:256,stencil:1024,color:16384}
GLSharp.Graphics.ClearMode.registerEnum('GLSharp.Graphics.ClearMode',false);GLSharp.Graphics.IGraphics=function(){};GLSharp.Graphics.IGraphics.registerInterface('GLSharp.Graphics.IGraphics');GLSharp.Graphics.IShader=function(){};GLSharp.Graphics.IShader.registerInterface('GLSharp.Graphics.IShader');GLSharp.Graphics.IShaderProgram=function(){};GLSharp.Graphics.IShaderProgram.registerInterface('GLSharp.Graphics.IShaderProgram');GLSharp.Graphics.IUniformLocation=function(){};GLSharp.Graphics.IUniformLocation.registerInterface('GLSharp.Graphics.IUniformLocation');GLSharp.Graphics.Color=function(){}
GLSharp.Graphics.Color.create=function(red,green,blue,alpha){var $0=new GLSharp.Graphics.Color();$0.set_red(red);$0.set_green(green);$0.set_blue(blue);$0.set_alpha(alpha);return $0;}
GLSharp.Graphics.Color.prototype={$0:0,$1:0,$2:0,$3:1,get_red:function(){return this.$0;},set_red:function(value){this.$0=value;return value;},get_green:function(){return this.$1;},set_green:function(value){this.$1=value;return value;},get_blue:function(){return this.$2;},set_blue:function(value){this.$2=value;return value;},get_alpha:function(){return this.$3;},set_alpha:function(value){this.$3=value;return value;}}
GLSharp.Graphics.Material=function(){}
GLSharp.Graphics.Material.prototype={$0:null,get_shader:function(){return this.$0;},set_shader:function(value){this.$0=value;return value;}}
GLSharp.Graphics.Mesh=function(){}
GLSharp.Content.LightItem.registerClass('GLSharp.Content.LightItem');GLSharp.Content.LightConverter.registerClass('GLSharp.Content.LightConverter',null,GLSharp.Content.IResourceConverter);GLSharp.Content.MeshItem.registerClass('GLSharp.Content.MeshItem');GLSharp.Content.MeshConverter.registerClass('GLSharp.Content.MeshConverter',null,GLSharp.Content.IResourceConverter);GLSharp.Content.NodeConverter.registerClass('GLSharp.Content.NodeConverter',null,GLSharp.Content.IResourceConverter);GLSharp.Content.Handle.registerClass('GLSharp.Content.Handle');GLSharp.Content.Collection.registerClass('GLSharp.Content.Collection');GLSharp.Content.ResourceItem.registerClass('GLSharp.Content.ResourceItem');GLSharp.Content.Library.registerClass('GLSharp.Content.Library');GLSharp.Universe.Component.registerClass('GLSharp.Universe.Component');GLSharp.Universe.MaterialComponent.registerClass('GLSharp.Universe.MaterialComponent',GLSharp.Universe.Component);GLSharp.Universe.ComponentCollection.registerClass('GLSharp.Universe.ComponentCollection');GLSharp.Universe.MeshComponent.registerClass('GLSharp.Universe.MeshComponent',GLSharp.Universe.Component);GLSharp.Universe.Node.registerClass('GLSharp.Universe.Node');GLSharp.Universe.World.registerClass('GLSharp.Universe.World');GLSharp.Util.Matrix4X4.registerClass('GLSharp.Util.Matrix4X4');GLSharp.Util.Vector3.registerClass('GLSharp.Util.Vector3');GLSharp.Engine.registerClass('GLSharp.Engine');GLSharp.Game.GameBase.registerClass('GLSharp.Game.GameBase');GLSharp.Graphics.Color.registerClass('GLSharp.Graphics.Color');GLSharp.Graphics.Material.registerClass('GLSharp.Graphics.Material');GLSharp.Graphics.Mesh.registerClass('GLSharp.Graphics.Mesh');GLSharp.Universe.Component.meshComponent='mesh';GLSharp.Universe.Component.materialComponent='material';GLSharp.Util.Matrix4X4.$0=null;})();// This script was generated using Script# v0.7.4.0
